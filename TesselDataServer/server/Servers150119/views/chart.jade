head
   script(src='http://www.google.com/jsapi') //Load the javascript library from google
   script. //Need the period to say that it applies to everything from here down!
      google.load('visualization', '1', {'packages': ['annotatedtimeline']}); //What type of graph we are doing
      google.setOnLoadCallback(drawChart);
      function drawChart() {
         var data = new google.visualization.DataTable();
         data.addColumn('date', 'Date'); //Must have here since this is a time line.
         data.addColumn('number', 'Light levels'); //This is the displayed unit?
         data.addColumn('string', 'title1');
         data.addColumn('string', 'text1');

         var lightRows = !{dataToRender}; //Use the exclamation mark to not escape

         for(var i = 0; i < lightRows.length; i++) {
            lightRows[i][0] = new Date(lightRows[i][0]); //replace ISO string date with a Date object
         }

         data.addRows(lightRows);
         var chart = new google.visualization.AnnotatedTimeLine(document.getElementById('chart_div'));
         chart.draw(data, {displayAnnotations: true}); //Draw it out!
      }

   style. //Style options for the text...
      body {
         padding: 50px;
         font: 14px "Lucida Grande", Helvetica, Arial, sans-serif;
         color: #808080;
      }
      a {
         color: #5556ff;
      }
      #chart_div {
         background-color: #57524f;
         width: 1000px;
         height: 240px;
      }
   body
      h1 Terrestrial Data System
      a(href='/values') Reload
      p
      #chart_div